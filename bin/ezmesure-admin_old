#!/usr/bin/env node

/* eslint-disable no-console */
/* eslint-disable max-len */

const program = require('commander');
const pkg = require('../package.json');

const counterCmd = require('./cmds_old/counter');

program.on('command:*', () => {
  console.error(`Invalid command: ${program.args.join(' ')}\nSee --help for a list of available commands.`);
  process.exit(1);
});

program
  .version(pkg.version)
  .command('counter4 <JR1file>')
  .description('output an expanded JSON file or load a COUNTER 4 JR1 file into ezMESURE / KIBANA (bluk)')
  .option('-b, --bulk ', 'bulk index JR1 data')
  .option('-c, --counter-package <JR1package>', 'JR1 package (do not try to guess from file name)')
  .option('-d, --depositor <depositor>', 'index prefix name for publisher index', 'local')
  .option('-n, --ndjson ', 'only output newline delimited JSON file')
  .action((JR1file, opts) => counterCmd.counter4(JR1file, opts));

program.parse(process.argv);
